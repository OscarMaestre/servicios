package com.ies.examenhilos;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Random;

public class Utilidades {
	/* Usado para generar números aleatorios*/
	private static Random generador=new Random();
	
	/* Convierte fechas a una cadena como "2020-12-09 16:04:28"*/
	private static SimpleDateFormat formateadorFechas=
				new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
	
	/** 
	 * Espera un tiempo al azar entre 0 y 3000 milisegundos
	 */
	public static void esperarTiempoAlAzar(){
		try {
			int msAzar=Utilidades.generador.nextInt(3000);
			Thread.sleep(msAzar);
		} catch (InterruptedException e) {
			//Alguien interrumpió el hilo
			System.out.println("Se interrumpió la ejecución del hilo, saliendo...");
			return ;
		}
	}
	
	/**
	 * Dado un nombre de fichero devuelve un objeto BufferedReader
	 * para poder leer líneas de él
	 * @param nombreFichero Nombre del fichero. Se pueden incluir rutas completas
	 * @return
	 * @throws FileNotFoundException
	 */
	public static BufferedReader getBufferedReader(String nombreFichero) throws FileNotFoundException{
		FileReader fr=new FileReader(nombreFichero);
		BufferedReader bfr=new BufferedReader(fr);
		return bfr;
		
	}
	
	/**
	 * Dado un nombre de fichero lo escribe en pantalla
	 * @param nombreFichero Nombre del fichero. Se pueden incluir rutas completas
	 * @throws IOException
	 */
	public static void mostrarFicheroEnPantalla(String nombreFichero) throws IOException{
		BufferedReader lector=getBufferedReader(nombreFichero);
		String linea;
		linea=lector.readLine();
		while (linea!=null){
			System.out.println(linea);
			linea=lector.readLine();
		}
	}
	
	
	public static void escribirMensaje(PrintWriter pw, String mensaje){
		Date instanteActual=new Date();
		
		String cadenaFecha=formateadorFechas.format(instanteActual);
		
		pw.println(cadenaFecha + " --> " + mensaje );
	}
	
	
}
